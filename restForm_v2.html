<html>
  <head>
    <title>Restaurant form system</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <script src="https://www.gstatic.com/firebasejs/3.7.4/firebase.js"></script>
    <script type="module">
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.6.6/firebase-app.js'
    </script>
  </head>
  <script src=restForm.mjs> 
  { 
    import writeUserData from 'restForm.mjs'; 
    console.log(writeUserData)
  }  
  </script>
  <title>Restaurant form system</title>
  <body>    
    <form class="formContainer" FORM NAME="restForm">
    userid<br />
    <input type="userId" id="userId" placeholder="userId" name="userId"/><br>
    Name<br />
    <input type="name_rest" id="name_rest" placeholder="name_rest" name="name_rest"/><br>
    address<br/>
    <input type="email" id="email" placeholder="email" name="email"/><br>
    contact<br />
    <input type="contact" id="contact" placeholder="contact" name="contact"/><br>
    plates<br />
    <input type="plates" id="plates" placeholder="plates" name="plates"/><br>
    <button onclick=writeUserData>Submit</button>
    </form>
<script type = "module">
import { initializeApp } from "firebase/app";
import { getDatabase } from "firebase/database";

console.log("Testing");

const firebaseConfig = {
  apiKey: "AIzaSyDPTG5iWPu6vYViTipWue07n5c7Z7_keps",
  authDomain: "zero-hunger-78b52.firebaseapp.com",
  databaseURL: "https://zero-hunger-78b52-default-rtdb.asia-southeast1.firebasedatabase.app/",
  storajgeBucket: "gs://zero-hunger-78b52.appspot.com"
};
const app = initializeApp(firebaseConfig);
//var userId= "IihriSoeUFXFFsCWEyauqvsOekv2"
//var name_rest="Nikshita";
//var contact=9878987876;
//var email="karkera@gmail.com";
//var plates=5;
const database = getDatabase(app);

import {ref, set } from "firebase/database";

function writeUserData(userId, name_rest, email, contact,plates) 
{
  console.log("Enter")
  const db = getDatabase();
  console.log(db)
  set(ref(db, 'zero hunger/restaurants/' + userId), {
    username: name_rest,
    email: email,
    contact: contact,
    plates:plates
  }).then(() => {
    console.log('Data saved successfully!')
  })
  .catch((error) => {
    console.log('The write failed...')
  });
  
  console.log('set done')
}
console.log("Running function...")
writeUserData(userId, name_rest, email,contact, plates)
</script>
  </body>
</html>